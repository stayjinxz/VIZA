<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Visa Test UI - Demo</title>
<style>
  :root{font-family:system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial; color:#111}
  body{margin:0;padding:14px;background:#f6f7fb}
  header{display:flex;align-items:center;gap:12px}
  h1{font-size:18px;margin:0}
  .card{background:#fff;border-radius:10px;padding:12px;margin:12px 0;box-shadow:0 4px 14px rgba(20,20,50,0.06)}
  label{display:block;font-size:13px;margin:8px 0 4px}
  input,select,textarea,button{width:100%;padding:10px;border-radius:8px;border:1px solid #e2e6ef;font-size:14px;box-sizing:border-box}
  button{background:#111;color:#fff;border:0;margin-top:10px}
  .row{display:flex;gap:8px}
  .row > *{flex:1}
  pre{background:#0f1724;color:#e6f2ff;padding:10px;border-radius:8px;overflow:auto;font-size:12px}
  .small{font-size:12px;color:#556}
  .muted{color:#667}
  .toggle{display:flex;gap:8px;align-items:center}
  @media(min-width:700px){body{max-width:720px;margin:0 auto;padding:20px}}
</style>
</head>
<body>
<header>
  <div>
    <h1>Visa Test UI demo</h1>
    <div class="small muted">Local mock UI only â€” no live network calls</div>
  </div>
</header>

<div class="card">
  <div class="toggle">
    <label><input type="checkbox" id="liveMode"> Live mode (simulate live)</label>
    <div class="small muted">If checked you must type I UNDERSTAND on submit</div>
  </div>
  <div class="toggle" style="margin-top:6px">
    <label><input type="checkbox" id="mockMode" checked> Mock mode</label>
    <select id="mockResult" style="width:auto;">
      <option value="success">Mock success</option>
      <option value="fail">Mock failure</option>
    </select>
    <div class="small muted">Mock mode returns deterministic results</div>
  </div>
</div>

<!-- CARD to CARD -->
<div class="card" id="cardSection">
  <h2 style="font-size:15px;margin:0 0 8px">Card to Card</h2>
  <label>Source card number</label>
  <input id="sourceCard" inputmode="numeric" autocomplete="cc-number" placeholder="4111 1111 1111 1111">

  <div class="row">
    <div>
      <label>Expiry (MM/YY)</label>
      <input id="sourceExpiry" placeholder="12/25">
    </div>
    <div>
      <label>CVV</label>
      <input id="sourceCvv" inputmode="numeric" placeholder="123">
    </div>
  </div>

  <label>Recipient card number</label>
  <input id="recipientCard" placeholder="Recipient PAN">

  <div class="row">
    <div>
      <label>Amount</label>
      <input id="amount" inputmode="decimal" placeholder="1.00">
    </div>
    <div>
      <label>Currency</label>
      <input id="currency" value="USD">
    </div>
  </div>

  <label>Statement descriptor (short)</label>
  <input id="descriptor" placeholder="OasisCapital">

  <label class="small">Cross-network detection</label>
  <div class="small muted">Visa/Amex detection is automatic by card BIN</div>

  <button id="sendCard">Build payload / Simulate</button>

  <div style="margin-top:10px">
    <div class="small muted">Constructed payload</div>
    <pre id="cardPayload">No payload yet</pre>
  </div>

  <div>
    <div class="small muted">Simulated response</div>
    <pre id="cardResponse">No response yet</pre>
  </div>
</div>

<!-- Additional sections like Direct Connect, B2B, SSL check, and debug remain unchanged... -->
<script>
// Paste your full JS from the HTML you provided here exactly, including the XPAY_KEY
</script>
</body>
</html>